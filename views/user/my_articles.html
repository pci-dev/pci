{{extend 'layout.html'}}

{{if 'myTitle' in locals():}}
{{=H1(myTitle)}}
{{pass}}

{{if 'myHelp' in locals():}}
  {{=myHelp}}
  {{pass}}

<div>
{{if 'form' in locals():}}
	{{=form}}
{{elif grid.create_form:}}
   {{=grid.create_form}}
{{elif grid.update_form:}}
   {{if 'myBackButton' in locals():}}
      {{=myBackButton}}
      {{pass}}
   {{=grid.update_form}}
   {{if 'formReply' in locals():}}
      {{=formReply}}
      {{pass}}
{{elif grid.view_form:}}
   {{if 'myBackButton' in locals():}}
      {{=myBackButton}}
      {{pass}}
   {{=grid.view_form}}
   {{if 'myAcceptBtn' in locals():}}
      {{=myAcceptBtn}}
      {{pass}}
{{else:}}
   {{if 'searchForm' in globals():}}
      <div>{{=searchForm}}</div>
    {{pass}}
    {{=grid}}
    {{pass}}
{{pass}}
</div>

<!-- Replace Add Record button text -->
<script type="text/javascript">
    $(function() {
        $('span')
        .filter(function(i) {
            return $(this).attr("title") ? $(this).attr("title").indexOf('{{=T("Add record to database")}}') != -1 : false;
        })
        .each(function(i) {
            $(this).text('{{=T("New recommendation request")}}').attr("title", '{{=T("Add a new recommendation request")}}');
        });
    })
</script>
<script>
jQuery(document).ready(function(){
   if(jQuery('#is_press_reviewTrue').prop('checked')) {
       jQuery('#t_articles_article_source__row').show();
   } else {
       jQuery('#t_articles_article_source__row').hide();
       jQuery(':submit').prop('disabled', true);
   }
   if(jQuery('#is_press_reviewTrue').length) jQuery(':submit').prop('disabled', false);
   jQuery('#is_press_reviewTrue').change(function(){
            if(jQuery('#is_press_reviewTrue').prop('checked')) {
                jQuery('#t_articles_article_source__row').show();
            } else {
                jQuery('#t_articles_article_source__row').hide();
            }
   });
   jQuery('#is_press_reviewFalse').change(function(){
            if(jQuery('#is_press_reviewTrue').prop('checked')) {
                jQuery('#t_articles_article_source__row').show();
            } else {
                jQuery('#t_articles_article_source__row').hide();
            }
   });
   jQuery('#t_articles_is_not_reviewed_elsewhere').change(function(){
            if(jQuery('#t_articles_is_not_reviewed_elsewhere').prop('checked')) {
                jQuery(':submit').prop('disabled', false);
            } else {
                jQuery(':submit').prop('disabled', true);
            }
   });
});
</script>
